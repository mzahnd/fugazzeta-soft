@use "sass:selector";
@use "sass:string";

$-viewport-mobile-tablet:       600px;
$-viewport-tablet-desktop:      1024px;
$-viewport-desktop-desktop-big: 1800px;

// Browser properties
@function browser-specific($browser, $property) {
  @if $browser == "Safari" {
    @return -webkit-#{$property};
  }
  @else if $browser == "Firefox" or $browser == "Mozilla" {
    @return -moz-#{$property};
  }
  @else if $browser == "IE" or $browser == "Explorer"
    or $browser == "Microsoft" {
    @return -ms-#{$property};
  }
  @else if $browser == "Opera" {
    @return -o-#{$property};
  }
}

// Buttons
@mixin btn-no-border-chrome($btn-class) {
    @at-root #{selector.unify($btn-class, ":focus:not(.focus-visible)")} {
      outline: none;
    }
}

// Flex
@mixin flex-item-align-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-column {
  flex-flow: column nowrap;
  @content;
}

@mixin flex-row {
  flex-flow: row wrap;
  @content;
}

@mixin flex-row-nw {
  flex-flow: row nowrap;
  @content;
}

// Hacks
@mixin clearfix-hack {
    &::after {
    content: "";
    clear: both;
    display: table;
  }
}

// Media
@mixin -media-screen-generic($min: null, $max: null) {
  @if $min == null and $max == null {
    @error "At least one argument should be defined for this function.";
  }

  @if $min and $max {
    @media screen and (min-width: $min) and (max-width: $max) { @content; }
  }
  @else if $min {
    @media screen and (min-width: $min) { @content; }
  }
  @else {
    @media screen and (max-width: $max) { @content; }
  }
}

@mixin media-screen($size) {
  // Phone only
  @if $size == 'phone-only' {
    @include -media-screen-generic($max: $-viewport-mobile-tablet - 1) {
      @content;
    }
  }

  // Tablet
  @else if $size == 'tablet' {
    @include -media-screen-generic($min: $-viewport-mobile-tablet,
      $max: $-viewport-tablet-desktop - 1) {
        @content;
      };
  }

  // Desktop
  @else if $size == 'desktop' {
    @include -media-screen-generic($min: $-viewport-tablet-desktop,
    $max: $-viewport-desktop-desktop-big - 1) {
      @content;
    }
  }
  @else if $size == 'desktop-big' {
    @include -media-screen-generic($min: $-viewport-desktop-desktop-big) {
      @content;
    }
  }
}

// Sprites
@function -print-spriter-args() {
  @error "spriter mixin takes: spriter($url , $left, $top, $width, $height)";
}
@mixin spriter($url: null,
    $left: null, $top: null,
    $width: null, $height: null) {

  @if not $url {
    @error "Empty sprite URL!";
    @include -print-spriter-args();
  };
  @if not $left {
    @error "Empty sprite left coordinate!";
    @include -print-spriter-args();
  };
  @if not $top {
    @error "Empty sprite top coordinate!";
    @include -print-spriter-args();
  };
  @if not $width {
    @error "Empty sprite width!";
    @include -print-spriter-args();
  };
  @if not $height {
    @error "Empty sprite height!";
    @include -print-spriter-args();
  };

  background-image: url(string.quote($url));
  background-repeat: no-repeat;
  background-position: $left $top;

  width: $width;
  height: $height;
  max-width: $width;
  max-height: $height;
}

